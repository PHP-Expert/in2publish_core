{namespace publish=In2code\In2publishCore\ViewHelpers}
{namespace core=TYPO3\CMS\Core\ViewHelpers}
<f:if condition="{record}">
	<tr class="in2publish-stagelisting__item in2publish-stagelisting__item--{record.state}">
		<f:comment>Left</f:comment>
		<td class="col-icon">
			<core:icon identifier="files-folder"></core:icon>
		</td>
		<td class="col-filename col-responsive nowrap" colspan="3">
			<f:if condition="{config.debug.showRecordDepth}">[{record.additionalProperties.depth}]</f:if>
			<publish:Miscellaneous.GetPropertyFromStagingDefinition record="{record}" propertyName="name" stagingLevel="local" fallbackProperty="identifier" />
		</td>
		<td class="col-control">
			<f:if condition="{record.changed}">
				<f:link.action
					class="t3js-modal-trigger btn btn-default"
					action="publishFolder"
					arguments="{identifier:record.identifier}"
					additionalAttributes="{data-title: 'Publish', data-content: '{f:translate(key:\'confirm_publish_pages\', default:\'Are you sure?\')}', data-severity: 'warning'}">
					Publish
					<core:icon identifier="actions-arrow-right"></core:icon>
				</f:link.action>
			</f:if>
		</td>

		<f:comment>Right</f:comment>
		<td class="col-icon">
			<core:icon identifier="files-folder"></core:icon>
		</td>
		<td class="col-filename col-responsive nowrap" colspan="2">
			<publish:Miscellaneous.GetPropertyFromStagingDefinition record="{record}" propertyName="name" stagingLevel="foreign" fallbackProperty="identifier" />
		</td>

		<td>
			<i class="in2publish-state-icon in2publish-state-icon--{record.state} in2publish-icon-circle ms-2"></i>
			<f:translate key="record.state.{record.state}.short"/>
		</td>
	</tr>

	<f:if condition="{record.relatedRecords}">
		<f:for each="{record.relatedRecords.physical_folder}" as="folderRecord">
			<f:render partial="File/Index/FolderList" arguments="{record:folderRecord, config:config}" />
		</f:for>
	</f:if>
</f:if>
